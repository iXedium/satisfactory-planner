@use '../settings/colors' as c;
@use '../settings/zindex' as z;
@use '../tools/typography' as type;
@use '../utilities/spacing' as s;

.c-tree-view {
  display: flex;
  flex-direction: column;
  gap: s.spacing(1);
  width: 100%;

  &__content {
    display: grid;
    grid-template-areas: "icon info building rate";
    grid-template-columns: auto 1fr auto auto;
    gap: s.spacing(4);
    align-items: center;
    padding: s.spacing(2);
    background: c.$color-background-dark;
    border: 1px solid c.$color-border;
    border-radius: s.spacing(2);
    position: relative;

    &--collapsible {
      cursor: pointer;
    }
  }

  &__collapse-icon {
    position: absolute;
    left: s.spacing(-4);
    top: 50%;
    transform: translateY(-50%);
    color: c.$color-primary;
    @include type.typography('sm');
    transition: transform 0.2s ease;
    transform-origin: center;

    &--collapsed {
      transform: translateY(-50%) rotate(-90deg);
    }
  }

  &__icon {
    grid-area: icon;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  &__info {
    grid-area: info;
    display: flex;
    flex-direction: column;
    gap: s.spacing(1);
  }

  &__title {
    margin: 0;
    @include type.typography('lg');
    color: c.$color-text-primary;
  }

  &__controls {
    display: flex;
    align-items: center;
    gap: s.spacing(2);
    z-index: z.$zindex-dropdown;
  }

  &__building {
    grid-area: building;
    display: flex;
    align-items: center;
    gap: s.spacing(2);
  }

  &__building-info {
    display: flex;
    flex-direction: column;
    gap: s.spacing(1);
  }

  &__producer-name {
    @include type.typography('base');
    color: c.$color-text-primary;
  }

  &__nominal-rate {
    @include type.typography('sm');
    color: c.$color-text-secondary;
  }

  &__children {
    display: flex;
    flex-direction: column;
    gap: s.spacing(1);
    margin-left: s.spacing(8);
  }

  &__child {
    position: relative;

    &::before {
      content: '';
      position: absolute;
      left: s.spacing(-4);
      top: 0;
      bottom: 0;
      width: 2px;
      background: c.$color-border;
    }
  }

  // Detail level modifiers
  &.compact {
    .c-tree-view__building {
      display: none;
    }

    .c-tree-view__content {
      padding: s.spacing(1);
      gap: s.spacing(2);
    }

    .c-tree-view__title {
      @include type.typography('base');
    }

    .c-tree-view__children {
      margin-left: s.spacing(4);
    }
  }

  &.detailed {
    .c-tree-view__content {
      padding: s.spacing(3);
    }

    .c-tree-view__title {
      @include type.typography('xl');
    }
  }

  // Rate type modifiers
  &[data-rate-type="negative"] {
    .c-tree-view__content {
      border-color: c.$color-danger;
    }
  }
} 